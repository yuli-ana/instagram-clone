{"version":3,"sources":["../node_modules/react-lines-ellipsis/lib/html.js","../node_modules/react-lines-ellipsis/lib/common.js","../node_modules/react-lines-ellipsis/lib/helpers.js","components/feed/FeedPost.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_possibleConstructorReturn","self","ReferenceError","_assertThisInitialized","_get","property","receiver","Reflect","get","base","object","_getPrototypeOf","_superPropBase","desc","getOwnPropertyDescriptor","value","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","React","require","_require","canvasStyle","mirrorProps","omit","hookNode","node","basedOn","Error","concat","nodeType","Node","TEXT_NODE","units","frag","document","createDocumentFragment","textContent","split","Array","from","forEach","unit","appendChild","text","span","createElement","className","dummySpan","parentNode","replaceChild","ELEMENT_NODE","nodes","slice","childNodes","len","unwrapTextNode","createTextNode","removeFollowingElementLeaves","root","contains","nextElementSibling","removeChild","findBlockAncestor","ndAncestor","test","tagName","toLowerCase","affectLayout","ndUnit","offsetHeight","offsetWidth","defaultProps","component","unsafeHTML","maxLine","ellipsis","ellipsisHTML","undefined","onReflow","winWidth","usedProps","HTMLEllipsis","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","state","html","clamped","canvas","nlUnits","protoProps","staticProps","subClass","superClass","create","_inherits","initCanvas","reflow","prevProps","copyStyleToCanvas","callback","setAttribute","style","body","_this2","targetStyle","window","getComputedStyle","innerHTML","newState","putEllipsis","calcIndexes","setState","bind","indexes","querySelectorAll","nd1stLayoutUnit","find","line","offsetTop","push","ndPrevUnit","pop","ndEllipsis","makeEllipsisSpan","_this$props","_this3","_this$state","_this$props2","Component","rest","ref","dangerouslySetInnerHTML","__html","module","exports","position","bottom","left","height","overflow","border","omittedKeys","ret","LikeButton","likes","classes","useFeedPostStyles","useState","liked","setLiked","Icon","UnlikeIcon","LikeIcon","like","onClick","SaveButton","saved","setSaved","RemoveIcon","SaveIcon","saveIcon","Comment","content","setContent","commentContainer","fullWidth","placeholder","multiline","rowsMax","rows","onChange","e","textField","InputProps","underline","color","commentButton","disabled","trim","FeedPost","post","index","showCaption","setShowCaption","toggleOptions","setToggleOptions","media","id","caption","user","comments","showFollowSuggestion","article","marginBottom","postHeader","MoreIcon","src","alt","image","postButtonsWrapper","postButtons","to","variant","expanded","collapsed","username","captionWrapper","moreButton","commentsLink","map","comment","commentUsername","datePosted","xsDown","onClose"],"mappings":"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","file":"static/js/3.b2ec0c8a.chunk.js","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nvar React = require('react');\n\nvar _require = require('./common'),\n    canvasStyle = _require.canvasStyle,\n    mirrorProps = _require.mirrorProps;\n\nvar _require2 = require('./helpers'),\n    omit = _require2.omit;\n\nfunction hookNode(node, basedOn) {\n  /* eslint-env browser */\n  if (basedOn !== 'letters' && basedOn !== 'words') {\n    throw new Error(\"Unsupported options basedOn: \".concat(basedOn));\n  }\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    var frag = document.createDocumentFragment();\n    var units;\n\n    switch (basedOn) {\n      case 'words':\n        units = node.textContent.split(/\\b|(?=\\W)/);\n        break;\n\n      case 'letters':\n        units = Array.from(node.textContent);\n        break;\n    }\n\n    units.forEach(function (unit) {\n      frag.appendChild(dummySpan(unit));\n    });\n    node.parentNode.replaceChild(frag, node);\n  } else if (node.nodeType === Node.ELEMENT_NODE) {\n    var nodes = [].slice.call(node.childNodes);\n    var len = nodes.length;\n\n    for (var i = 0; i < len; i++) {\n      hookNode(nodes[i], basedOn);\n    }\n  }\n}\n\nfunction dummySpan(text) {\n  var span = document.createElement('span');\n  span.className = 'LinesEllipsis-unit';\n  span.textContent = text;\n  return span;\n}\n\nfunction unwrapTextNode(node) {\n  node.parentNode.replaceChild(document.createTextNode(node.textContent), node);\n}\n\nfunction removeFollowingElementLeaves(node, root) {\n  if (!root.contains(node) || node === root) return;\n\n  while (node.nextElementSibling) {\n    node.parentNode.removeChild(node.nextElementSibling);\n  }\n\n  removeFollowingElementLeaves(node.parentNode, root);\n}\n\nfunction findBlockAncestor(node) {\n  var ndAncestor = node;\n\n  while (ndAncestor = ndAncestor.parentNode) {\n    if (/p|div|main|section|h\\d|ul|ol|li/.test(ndAncestor.tagName.toLowerCase())) {\n      return ndAncestor;\n    }\n  }\n}\n\nfunction affectLayout(ndUnit) {\n  return !!(ndUnit.offsetHeight && (ndUnit.offsetWidth || /\\S/.test(ndUnit.textContent)));\n}\n\nvar defaultProps = {\n  component: 'div',\n  unsafeHTML: '',\n  maxLine: 1,\n  ellipsis: '…',\n  // &hellip;\n  ellipsisHTML: undefined,\n  className: '',\n  basedOn: undefined,\n  onReflow: function onReflow() {},\n  winWidth: undefined // for the HOC\n\n};\nvar usedProps = Object.keys(defaultProps);\n/**\n * props.unsafeHTML {String} the rich content you want to clamp\n * props.maxLine {Number|String} max lines allowed\n * props.ellipsis {String} the ellipsis indicator\n * props.basedOn {String} letters|words\n * props.className {String}\n */\n\nvar HTMLEllipsis =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(HTMLEllipsis, _React$Component);\n\n  function HTMLEllipsis(props) {\n    var _this;\n\n    _classCallCheck(this, HTMLEllipsis);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(HTMLEllipsis).call(this, props));\n    _this.state = {\n      html: props.unsafeHTML,\n      clamped: false\n    };\n    _this.canvas = null;\n    _this.maxLine = 0;\n    _this.nlUnits = [];\n    return _this;\n  }\n\n  _createClass(HTMLEllipsis, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initCanvas();\n      this.reflow(this.props);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.winWidth !== this.props.winWidth) {\n        this.copyStyleToCanvas();\n      }\n\n      if (this.props !== prevProps) {\n        this.reflow(this.props);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.canvas.parentNode.removeChild(this.canvas);\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(state, callback) {\n      if (typeof state.clamped !== 'undefined') {\n        this.clamped = state.clamped;\n      }\n\n      return _get(_getPrototypeOf(HTMLEllipsis.prototype), \"setState\", this).call(this, state, callback);\n    }\n  }, {\n    key: \"initCanvas\",\n    value: function initCanvas() {\n      if (this.canvas) return;\n      var canvas = this.canvas = document.createElement('div');\n      canvas.className = \"LinesEllipsis-canvas \".concat(this.props.className);\n      canvas.setAttribute('aria-hidden', 'true');\n      this.copyStyleToCanvas();\n      Object.keys(canvasStyle).forEach(function (key) {\n        canvas.style[key] = canvasStyle[key];\n      });\n      document.body.appendChild(canvas);\n    }\n  }, {\n    key: \"copyStyleToCanvas\",\n    value: function copyStyleToCanvas() {\n      var _this2 = this;\n\n      var targetStyle = window.getComputedStyle(this.target);\n      mirrorProps.forEach(function (key) {\n        _this2.canvas.style[key] = targetStyle[key];\n      });\n    }\n  }, {\n    key: \"reflow\",\n    value: function reflow(props) {\n      /* eslint-disable no-control-regex */\n      this.maxLine = +props.maxLine || 1;\n      this.canvas.innerHTML = props.unsafeHTML;\n      var basedOn = props.basedOn || (/^[\\x00-\\x7F]+$/.test(props.unsafeHTML) ? 'words' : 'letters');\n      hookNode(this.canvas, basedOn);\n      var clamped = this.putEllipsis(this.calcIndexes());\n      var newState = {\n        clamped: clamped,\n        html: this.canvas.innerHTML\n      };\n      this.setState(newState, props.onReflow.bind(this, newState));\n    }\n  }, {\n    key: \"calcIndexes\",\n    value: function calcIndexes() {\n      var indexes = [0];\n      var nlUnits = this.nlUnits = Array.from(this.canvas.querySelectorAll('.LinesEllipsis-unit'));\n      var len = nlUnits.length;\n      if (!nlUnits.length) return indexes;\n      var nd1stLayoutUnit = nlUnits.find(affectLayout);\n      if (!nd1stLayoutUnit) return indexes;\n      var line = 1;\n      var offsetTop = nd1stLayoutUnit.offsetTop;\n\n      for (var i = 1; i < len; i++) {\n        if (affectLayout(nlUnits[i]) && nlUnits[i].offsetTop - offsetTop > 1) {\n          line++;\n          indexes.push(i);\n          offsetTop = nlUnits[i].offsetTop;\n\n          if (line > this.maxLine) {\n            break;\n          }\n        }\n      }\n\n      return indexes;\n    }\n  }, {\n    key: \"putEllipsis\",\n    value: function putEllipsis(indexes) {\n      if (indexes.length <= this.maxLine) return false;\n      this.nlUnits = this.nlUnits.slice(0, indexes[this.maxLine]);\n      var ndPrevUnit = this.nlUnits.pop();\n      var ndEllipsis = this.makeEllipsisSpan();\n\n      do {\n        removeFollowingElementLeaves(ndPrevUnit, this.canvas);\n        findBlockAncestor(ndPrevUnit).appendChild(ndEllipsis);\n        ndPrevUnit = this.nlUnits.pop();\n      } while (ndPrevUnit && (!affectLayout(ndPrevUnit) || ndEllipsis.offsetHeight > ndPrevUnit.offsetHeight || ndEllipsis.offsetTop > ndPrevUnit.offsetTop));\n\n      if (ndPrevUnit) {\n        unwrapTextNode(ndPrevUnit);\n      }\n\n      this.nlUnits.forEach(unwrapTextNode);\n      return true;\n    }\n  }, {\n    key: \"makeEllipsisSpan\",\n    value: function makeEllipsisSpan() {\n      var _this$props = this.props,\n          ellipsisHTML = _this$props.ellipsisHTML,\n          ellipsis = _this$props.ellipsis;\n      var frag = document.createElement('span');\n      frag.appendChild(document.createElement('wbr'));\n      var ndEllipsis = document.createElement('span');\n      ndEllipsis.className = 'LinesEllipsis-ellipsis';\n\n      if (ellipsisHTML) {\n        ndEllipsis.innerHTML = ellipsisHTML;\n      } else {\n        ndEllipsis.textContent = ellipsis;\n      }\n\n      frag.appendChild(ndEllipsis);\n      return frag;\n    } // expose\n\n  }, {\n    key: \"isClamped\",\n    value: function isClamped() {\n      return this.clamped; // do not use state.clamped. #27\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          html = _this$state.html,\n          clamped = _this$state.clamped;\n\n      var _this$props2 = this.props,\n          Component = _this$props2.component,\n          className = _this$props2.className,\n          unsafeHTML = _this$props2.unsafeHTML,\n          rest = _objectWithoutProperties(_this$props2, [\"component\", \"className\", \"unsafeHTML\"]);\n\n      return React.createElement(Component, _extends({\n        className: \"LinesEllipsis \".concat(clamped ? 'LinesEllipsis--clamped' : '', \" \").concat(className),\n        ref: function ref(node) {\n          return _this3.target = node;\n        }\n      }, omit(rest, usedProps)), React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: clamped ? html : unsafeHTML\n        }\n      }));\n    }\n  }]);\n\n  return HTMLEllipsis;\n}(React.Component);\n\nHTMLEllipsis.defaultProps = defaultProps;\nmodule.exports = HTMLEllipsis;\n\n","\"use strict\";\n\nmodule.exports = {\n  canvasStyle: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    height: 0,\n    overflow: 'hidden',\n    'padding-top': 0,\n    'padding-bottom': 0,\n    border: 'none'\n  },\n  mirrorProps: ['box-sizing', 'width', 'font-size', 'font-weight', 'font-family', 'font-style', 'letter-spacing', 'text-indent', 'white-space', 'word-break', 'overflow-wrap', 'padding-left', 'padding-right']\n};\n\n","\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction omit(obj, omittedKeys) {\n  if (!obj || _typeof(obj) !== 'object') {\n    return obj;\n  }\n\n  var ret = {};\n  Object.keys(obj).forEach(function (key) {\n    if (omittedKeys.indexOf(key) > -1) {\n      return;\n    }\n\n    ret[key] = obj[key];\n  });\n  return ret;\n}\n\nmodule.exports = {\n  omit: omit\n};\n\n","import React, { useState } from \"react\";\nimport { useFeedPostStyles } from \"../../styles\";\nimport UserCard from \"../shared/UserCard\";\nimport {\n  MoreIcon,\n  ShareIcon,\n  LikeIcon,\n  CommentIcon,\n  UnlikeIcon,\n  SaveIcon,\n  RemoveIcon,\n} from \"../../icons\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Button,\n  Typography,\n  Hidden,\n  Divider,\n  TextField,\n} from \"@material-ui/core\";\nimport HTMLEllipsis from \"react-lines-ellipsis/lib/html\";\nimport FollowSuggestions from \"../shared/FollowSuggestions\";\nimport OptionsDialog from \"../shared/OptionsDialog\";\n\nfunction FeedPost({ post, index }) {\n  const classes = useFeedPostStyles();\n  const [showCaption, setShowCaption] = useState(false);\n  const [toggleOptions, setToggleOptions] = useState(false);\n  const { media, id, caption, likes, user, comments } = post;\n  const showFollowSuggestion = index === 1;\n\n  function handleToggleOptions() {\n    setToggleOptions(true);\n  }\n\n  return (\n    <>\n      <article\n        className={classes.article}\n        style={{\n          marginBottom: showFollowSuggestion && 30,\n        }}\n      >\n        {/* Feed post header */}\n        <div className={classes.postHeader}>\n          <UserCard user={user} />\n          <MoreIcon\n            onClick={handleToggleOptions}\n            className={classes.MoreIcon}\n          />\n        </div>\n        {/* Feed post image */}\n        <div>\n          <img src={media} alt=\"Post media\" className={classes.image} />\n        </div>\n        {/* Feed post image */}\n        <div className={classes.postButtonsWrapper}>\n          <div className={classes.postButtons}>\n            <LikeButton likes={likes} />\n            <Link to={`/p/:${id}`}>\n              <CommentIcon />\n            </Link>\n            <ShareIcon />\n            <SaveButton />\n          </div>\n          <Typography className={classes.likes} variant=\"subtitle2\">\n            <span>{likes === 1 ? \"1 like\" : `${likes} likes`}</span>\n          </Typography>\n          <div className={showCaption ? classes.expanded : classes.collapsed}>\n            <Link to={`/${user.username}`}>\n              <Typography\n                variant=\"subtitle2\"\n                component=\"span\"\n                className={classes.username}\n              >\n                {user.username}\n              </Typography>\n            </Link>\n            {showCaption ? (\n              <Typography\n                variant=\"body2\"\n                component=\"span\"\n                dangerouslySetInnerHTML={{ __html: caption }}\n              ></Typography>\n            ) : (\n              <div className={classes.captionWrapper}>\n                <HTMLEllipsis\n                  unsafeHTML={caption}\n                  className={classes.caption}\n                  maxLine=\"0\"\n                  ellipsis=\"...\"\n                  basedOn=\"letters\"\n                />\n                <Button\n                  onClick={() => setShowCaption(true)}\n                  className={classes.moreButton}\n                >\n                  more\n                </Button>\n              </div>\n            )}\n          </div>\n          <Link to={`/p/${id}`}>\n            <Typography\n              className={classes.commentsLink}\n              variant=\"body2\"\n              component=\"div\"\n            >\n              View all {comments.length} comments\n            </Typography>\n          </Link>\n          {comments.map((comment) => (\n            <div key={comment.id}>\n              <Link to={`/${comment.user.username}`}>\n                <Typography\n                  variant=\"subtitle2\"\n                  component=\"span\"\n                  className={classes.commentUsername}\n                >\n                  {comment.user.username}\n                </Typography>{\" \"}\n                <Typography variant=\"body2\" component=\"span\">\n                  {comment.content}\n                </Typography>\n              </Link>\n            </div>\n          ))}\n          <Typography color=\"textSecondary\" className={classes.datePosted}>\n            8 HOURS AGO\n          </Typography>\n        </div>\n        <Hidden xsDown>\n          <Divider />\n          <Comment />\n        </Hidden>\n      </article>\n\n      {showFollowSuggestion && <FollowSuggestions />}\n      {toggleOptions && (\n        <OptionsDialog id={id} onClose={() => setToggleOptions(false)} />\n      )}\n    </>\n  );\n}\n\nfunction LikeButton({ likes }) {\n  const classes = useFeedPostStyles();\n  const [liked, setLiked] = useState(false);\n  //capitalized Icon because it's a component\n  const Icon = liked ? UnlikeIcon : LikeIcon;\n\n  // For animation\n  const className = liked ? classes.liked : classes.like;\n  const onClick = liked ? handleUnlike : handleLike;\n\n  function handleLike() {\n    setLiked(true);\n  }\n\n  function handleUnlike() {\n    setLiked(false);\n  }\n\n  return <Icon className={className} onClick={onClick} />;\n}\n\nfunction SaveButton() {\n  const classes = useFeedPostStyles();\n  const [saved, setSaved] = useState(false);\n  //capitalized Icon because it's a component\n  const Icon = saved ? RemoveIcon : SaveIcon;\n  const onClick = saved ? handleRemove : handleSave;\n\n  function handleSave() {\n    setSaved(true);\n  }\n\n  function handleRemove() {\n    setSaved(false);\n  }\n\n  return <Icon className={classes.saveIcon} onClick={onClick} />;\n}\n\nfunction Comment() {\n  const classes = useFeedPostStyles();\n  const [content, setContent] = useState(\"\");\n\n  return (\n    <div className={classes.commentContainer}>\n      <TextField\n        fullWidth\n        value={content}\n        placeholder=\"Add a comment...\"\n        multiline\n        rowsMax={2}\n        rows={1}\n        onChange={(e) => setContent(e.target.value)}\n        className={classes.textField}\n        InputProps={{\n          classes: {\n            root: classes.root,\n            underline: classes.underline,\n          },\n        }}\n      />\n      <Button\n        color=\"primary\"\n        className={classes.commentButton}\n        disabled={!content.trim()}\n      >\n        Post\n      </Button>\n    </div>\n  );\n}\n\nexport default FeedPost;\n"],"sourceRoot":""}